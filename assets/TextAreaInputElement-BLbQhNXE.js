import{r as p,j as e}from"./index-C-5BX-Pb.js";import{a as D}from"./index-NIGUFBhG.js";const k="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%208L8%2016M16%2016L8%208'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",C="_upload_images_ua9nr_3",E="_uploaded_images_ua9nr_85",I="_product_photo_ua9nr_97",g={upload_images:C,uploaded_images:E,product_photo:I},A="http://localhost:1337",P=localStorage.getItem("token"),x=D.create({baseURL:`${A}/api/`,headers:{Authorization:`Bearer ${P}`}}),_=async o=>{try{const a=new FormData;return a.append("files",o),(await x.post("/upload",a)).data[0]}catch(a){throw console.error("Error uploading photo:",a),a}},U=async o=>{try{await x.delete(`/upload/files/${o}`)}catch(a){throw console.error("Error uploading photo:",a),a}};function L({quantity:o,title:a,description:i,onUpload:c}){const[r,d]=p.useState([]),[h,f]=p.useState(!1),j=async t=>{t.preventDefault();const l=Array.from(t.dataTransfer.files).filter(n=>n.type==="image/jpeg"||n.type==="image/png");if(l.length>0){for(const n of l)if(r.length<o){const u=await _(n);d(m=>[...m,u])}}},v=t=>{t.preventDefault()},y=async t=>{if(h)return;const s=t.target.files;if(s){const l=Array.from(s).filter(n=>n.type==="image/jpeg"||n.type==="image/png");for(const n of l)if(r.length<o){const u=await _(n);d(m=>[...m,u])}}},w=async t=>{d(s=>s.filter(l=>l.id!==t)),await U(t)},F=r.map((t,s)=>e.jsxs("div",{className:g.product_photo,children:[e.jsx("img",{src:t.url,alt:"product photo"}),e.jsx("span",{onClick:()=>{w(t.id)},children:e.jsx("img",{src:k,alt:"delete Icon"})})]},t.name+s));return p.useEffect(()=>{r.length===o?f(!0):r.length<o+1&&f(!1)},[r,o]),p.useEffect(()=>{if(c){const t=r.map(s=>s.id).filter(s=>s!==void 0);c(t)}},[r]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:g.upload_images,onDrop:j,onDragOver:v,style:h?{cursor:"no-drop"}:{cursor:"default"},children:[r.length<1?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:a}),e.jsx("p",{children:i})]}):e.jsx("div",{className:g.uploaded_images,style:{gridTemplateColumns:`repeat(${o},1fr)`},children:F}),e.jsx("label",{htmlFor:"uploadPhoto",style:h?{cursor:"no-drop"}:{cursor:"pointer"},children:"Upload"}),e.jsx("input",{type:"file",name:"",id:"uploadPhoto",hidden:!0,multiple:o>1,onChange:y})]})})}const b="_text_area_input_element_bhdly_3",$={text_area_input_element:b};function R({id:o,label:a,name:i,placeholder:c,onChange:r}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:$.text_area_input_element,children:[e.jsx("label",{htmlFor:o,children:a}),e.jsx("textarea",{name:i,id:o,placeholder:c,onChange:d=>{r(d)}})]})})}export{R as T,L as U};
