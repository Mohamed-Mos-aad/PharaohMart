import{r as _,j as e}from"./index-CKgybt_u.js";import{a as I}from"./index-NIGUFBhG.js";const A="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%208L8%2016M16%2016L8%208'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",E="_upload_images_1w8r3_3",P="_title_1w8r3_29",U="_uploaded_images_1w8r3_85",b="_product_photo_1w8r3_97",h={upload_images:E,title:P,uploaded_images:U,product_photo:b},N="http://localhost:1337",$=localStorage.getItem("token"),w=I.create({baseURL:`${N}/api/`,headers:{Authorization:`Bearer ${$}`}}),j=async t=>{try{const a=new FormData;return a.append("files",t),(await w.post("/upload",a)).data[0]}catch(a){throw console.error("Error uploading photo:",a),a}},T=async t=>{try{await w.delete(`/upload/files/${t}`)}catch(a){throw console.error("Error uploading photo:",a),a}};function M({quantity:t,title:a,description:d,onUpload:p}){const[r,i]=_.useState([]),[c,f]=_.useState(!1),v=async o=>{o.preventDefault();const l=Array.from(o.dataTransfer.files).filter(s=>s.type==="image/jpeg"||s.type==="image/png");if(l.length>0){for(const s of l)if(r.length<t){const m=await j(s);i(u=>[...u,m])}}},y=o=>{o.preventDefault()},F=async o=>{if(c)return;const n=o.target.files;if(n){const l=Array.from(n).filter(s=>s.type==="image/jpeg"||s.type==="image/png");for(const s of l)if(r.length<t){const m=await j(s);i(u=>{const x=[...u,m];if(p){const C=x.map(g=>g.id).filter(g=>g!==void 0);p(C)}return x})}}},D=async o=>{i(n=>n.filter(l=>l.id!==o)),await T(o)},k=r.map((o,n)=>e.jsxs("div",{className:h.product_photo,children:[e.jsx("img",{src:o.url,alt:"product photo"}),e.jsx("span",{onClick:()=>{D(o.id)},children:e.jsx("img",{src:A,alt:"delete Icon"})})]},o.name+n));return _.useEffect(()=>{r.length===t?f(!0):r.length<t+1&&f(!1)},[r,t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:h.upload_images,onDrop:v,onDragOver:y,style:c?{cursor:"no-drop"}:{cursor:"default"},children:[r.length<1?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:h.title,children:a}),e.jsx("p",{children:d})]}):e.jsx("div",{className:h.uploaded_images,style:{gridTemplateColumns:`repeat(${t},1fr)`},children:k}),e.jsx("label",{htmlFor:"uploadPhoto",style:c?{cursor:"no-drop"}:{cursor:"pointer"},children:"Upload"}),e.jsx("input",{type:"file",name:"",id:"uploadPhoto",hidden:!0,multiple:t>1,onChange:F})]})})}const L="_text_area_input_element_bhdly_3",R={text_area_input_element:L};function O({id:t,label:a,name:d,placeholder:p,value:r,onChange:i}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:R.text_area_input_element,children:[e.jsx("label",{htmlFor:t,children:a}),e.jsx("textarea",{name:d,id:t,placeholder:p,value:r,onChange:c=>{i(c)}})]})})}export{O as T,M as U};
