import{r as o,j as t}from"./index-DrBJZPAC.js";import{s as M}from"./searchIcon-CqVP-Baf.js";import{D as p,g as k}from"./categoriesActions-CMMQcAdX.js";import{D as P}from"./DashboardHeader-CfI9lzOW.js";import{c as b,u as S}from"./productActions-Cw5mRmqG.js";import{P as L}from"./index-DD7Rslxi.js";import"./axios.config-_zA4RlWj.js";const D="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.8617%204.48667L18.5492%202.79917C19.2814%202.06694%2020.4686%202.06694%2021.2008%202.79917C21.9331%203.53141%2021.9331%204.71859%2021.2008%205.45083L10.5822%2016.0695C10.0535%2016.5981%209.40144%2016.9868%208.68489%2017.2002L6%2018L6.79978%2015.3151C7.01323%2014.5986%207.40185%2013.9465%207.93052%2013.4178L16.8617%204.48667ZM16.8617%204.48667L19.5%207.12499M18%2014V18.75C18%2019.9926%2016.9926%2021%2015.75%2021H5.25C4.00736%2021%203%2019.9926%203%2018.75V8.24999C3%207.00735%204.00736%205.99999%205.25%205.99999H10'%20stroke='%23212529'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",A="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.75%205.25L15.75%2018.75M8.25%205.25V18.75'%20stroke='%23212529'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",I="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.25%205.65248C5.25%204.7968%206.1674%204.25437%206.91716%204.66674L18.4577%2011.0141C19.2349%2011.4415%2019.2349%2012.5581%2018.4577%2012.9855L6.91716%2019.3329C6.1674%2019.7452%205.25%2019.2028%205.25%2018.3471V5.65248Z'%20stroke='%23212529'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",N="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.7404%209L14.3942%2018M9.60577%2018L9.25962%209M19.2276%205.79057C19.5696%205.84221%2019.9104%205.89747%2020.25%205.95629M19.2276%205.79057L18.1598%2019.6726C18.0696%2020.8448%2017.0921%2021.75%2015.9164%2021.75H8.08357C6.90786%2021.75%205.93037%2020.8448%205.8402%2019.6726L4.77235%205.79057M19.2276%205.79057C18.0812%205.61744%2016.9215%205.48485%2015.75%205.39432M3.75%205.95629C4.08957%205.89747%204.43037%205.84221%204.77235%205.79057M4.77235%205.79057C5.91878%205.61744%207.07849%205.48485%208.25%205.39432M15.75%205.39432V4.47819C15.75%203.29882%2014.8393%202.31423%2013.6606%202.27652C13.1092%202.25889%2012.5556%202.25%2012%202.25C11.4444%202.25%2010.8908%202.25889%2010.3394%202.27652C9.16065%202.31423%208.25%203.29882%208.25%204.47819V5.39432M15.75%205.39432C14.5126%205.2987%2013.262%205.25%2012%205.25C10.738%205.25%209.48744%205.2987%208.25%205.39432'%20stroke='%23212529'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",V="_dashboard_products_nsz1o_3",z="_search_element_nsz1o_49",E="_product_img_nsz1o_151",H="_product_options_nsz1o_175",B="_filter_options_nsz1o_195",c={dashboard_products:V,search_element:z,product_img:E,product_options:H,filter_options:B};function $(){const[n,h]=o.useState([]),[u,d]=o.useState(n),[x,m]=o.useState([]),[r,g]=o.useState({category:"All",statu:"All"}),[l,j]=o.useState(""),_=async()=>{const e=await b();h(e),d(e)},C=()=>{const e=n.filter(s=>{const i=l===""||s.name.toLowerCase().includes(l.toLowerCase()),a=r.category==="All"||s.categories.some(y=>y.title===r.category),f=r.statu==="All"||s.isPublished===r.statu;return i&&a&&f});d(e)},w=async e=>{try{const s={isPublished:!e.isPublished};await S(e.documentId,s);const i=n.map(a=>a.documentId===e.documentId?{...a,isPublished:!a.isPublished}:a);h(i),d(i)}catch(s){console.error("Failed to update:",s)}},v=o.useMemo(()=>u.map(e=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx("div",{className:c.product_img,children:t.jsx("img",{src:e.mainImage.url,loading:"lazy",alt:e.name})})}),t.jsx("td",{children:e.name}),t.jsxs("td",{children:["$",e.salePrice]}),t.jsx("td",{children:e.stockQuantity}),t.jsx("td",{children:e.isPublished?"Live":"unLive"}),t.jsx("td",{children:(e.categories[0]?.title||"No Category")+(e.categories[1]?" , "+e.categories[1].title:"")}),t.jsx("td",{children:t.jsxs("div",{className:c.product_options,children:[t.jsx("img",{src:D,alt:"edit icon"}),t.jsx("img",{src:e.isPublished?A:I,alt:e.isPublished?"pause icon":"play icon",onClick:()=>{w(e)}}),t.jsx("img",{src:N,alt:"delete icon"})]})})]},e.documentId)),[u]);return o.useEffect(()=>{_()},[]),o.useEffect(()=>{(async()=>{const s=await k();m(s.data)})()},[]),o.useEffect(()=>{C()},[r,l,n]),t.jsx(t.Fragment,{children:t.jsx("div",{className:"dashboard_container",children:t.jsxs("div",{className:c.dashboard_products,children:[t.jsx(P,{title:"My Products",description:"Manage your product listings efficiently."}),t.jsxs("div",{className:c.search_element,children:[t.jsx("img",{src:M,alt:"search icon"}),t.jsx("input",{type:"text",placeholder:"Search products by name",onChange:e=>{j(e.currentTarget.value)}})]}),t.jsxs("div",{className:c.filter_options,children:[t.jsx(p,{title:"Category",selections:x,onSelect:e=>{g(s=>({...s,category:e.title}))}}),t.jsx(p,{title:"Stock Status",selections:L,onSelect:e=>{g(s=>({...s,statu:e.id===null?"All":e.id===0}))}})]}),t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Image"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Price"}),t.jsx("th",{children:"Stock"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Category"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:v})]})]})})})}export{$ as default};
