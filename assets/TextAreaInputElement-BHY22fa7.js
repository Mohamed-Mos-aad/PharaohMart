import{r as p,j as e}from"./index-BLNdKlxx.js";import{a as D}from"./index-NIGUFBhG.js";const U="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%208L8%2016M16%2016L8%208'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",$="_upload_images_ua9nr_3",k="_uploaded_images_ua9nr_85",C="_product_photo_ua9nr_97",g={upload_images:$,uploaded_images:k,product_photo:C},E="http://localhost:1337",I=localStorage.getItem("token"),x=D.create({baseURL:`${E}/api/`,headers:{Authorization:`Bearer ${I}`}}),_=async o=>{try{const a=new FormData;return a.append("files",o),(await x.post("/upload",a)).data[0]}catch(a){throw console.error("Error uploading photo:",a),a}},A=async o=>{try{await x.delete(`/upload/files/${o}`)}catch(a){throw console.error("Error uploading photo:",a),a}},P="http://localhost:1337";function T({quantity:o,title:a,description:c,onUpload:d}){const[s,i]=p.useState([]),[h,f]=p.useState(!1),j=async t=>{t.preventDefault();const l=Array.from(t.dataTransfer.files).filter(n=>n.type==="image/jpeg"||n.type==="image/png");if(l.length>0){for(const n of l)if(s.length<o){const u=await _(n);i(m=>[...m,u])}}},v=t=>{t.preventDefault()},y=async t=>{if(h)return;const r=t.target.files;if(r){const l=Array.from(r).filter(n=>n.type==="image/jpeg"||n.type==="image/png");for(const n of l)if(s.length<o){const u=await _(n);i(m=>[...m,u])}}},w=async t=>{i(r=>r.filter(l=>l.id!==t)),await A(t)},F=s.map((t,r)=>{const l=`${P}/${t.url}`;return e.jsxs("div",{className:g.product_photo,children:[e.jsx("img",{src:l,alt:"product photo"}),e.jsx("span",{onClick:()=>{w(t.id)},children:e.jsx("img",{src:U,alt:"delete Icon"})})]},t.name+r)});return p.useEffect(()=>{s.length===o?f(!0):s.length<o+1&&f(!1)},[s,o]),p.useEffect(()=>{if(d){const t=s.map(r=>r.id).filter(r=>r!==void 0);d(t)}},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:g.upload_images,onDrop:j,onDragOver:v,style:h?{cursor:"no-drop"}:{cursor:"default"},children:[s.length<1?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:a}),e.jsx("p",{children:c})]}):e.jsx("div",{className:g.uploaded_images,style:{gridTemplateColumns:`repeat(${o},1fr)`},children:F}),e.jsx("label",{htmlFor:"uploadPhoto",style:h?{cursor:"no-drop"}:{cursor:"pointer"},children:"Upload"}),e.jsx("input",{type:"file",name:"",id:"uploadPhoto",hidden:!0,multiple:o>1,onChange:y})]})})}const b="_text_area_input_element_bhdly_3",L={text_area_input_element:b};function S({id:o,label:a,name:c,placeholder:d,onChange:s}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:L.text_area_input_element,children:[e.jsx("label",{htmlFor:o,children:a}),e.jsx("textarea",{name:c,id:o,placeholder:d,onChange:i=>{s(i)}})]})})}export{S as T,T as U};
