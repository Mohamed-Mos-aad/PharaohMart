import{a as v,u as _,r as h,j as e,s as T}from"./index-CGZKTDgq.js";import{D}from"./DashboardHeader-BpGtvJrA.js";import{I as i}from"./InputElement-BgMUtch-.js";import{D as g,g as E}from"./categoriesActions-Bgwkzxbw.js";import{U as C}from"./UploadPhotos-TNB7Le68.js";import{T as N}from"./ToggleElement-0MZ-yqGU.js";import{T as k}from"./TextAreaInputElement-DSOzJuuj.js";import{a as b}from"./axios.config-BH0nYfFy.js";import{d as I}from"./productActions-DL27wnCb.js";import{W as A,L as U}from"./index-DD7Rslxi.js";const K="_add_product_19vcl_3",W="_inputs_row_19vcl_41",H="_product_btns_19vcl_119",u={add_product:K,inputs_row:W,product_btns:H},Q=async p=>{try{return(await b.post("/tags",{data:{name:p}})).data}catch(n){throw console.error("Error adding tag:",n),n}},G=async p=>{try{return(await b.get(`/tags?filters[name][$eq]=${p}`)).data.data[0]||null}catch(n){return console.error("Error finding tag:",n),null}};function Y(){const{userData:p}=v(),n=_(),m=new Date,x={owner:p?.id??0,name:"",description:"",categories:[],tags:[],price:0,salePrice:0,stockQuantity:0,productSKU:"",lowStockAlert:0,weight:0,length:0,width:0,unitWeight:"",unitDimension:"",images:[],mainImage:null,isPublished:!1,publishDate:m.toISOString().split("T")[0],publishTime:m.toTimeString().split(" ")[0]},[a,o]=h.useState(x),[j,y]=h.useState([]),[S,f]=h.useState(0),r=t=>{const{id:s,value:l}=t.currentTarget;let c=l;s==="tags"&&(c=l.split(",").map(d=>d.trim())),o(d=>({...d,[s]:c}))},w=async()=>{if(a.isPublished)try{const t=[];if(a.tags&&a.tags.length>0)for(const l of a.tags){const c=typeof l=="string"?l:String(l);if(!c.trim())continue;const d=await G(c.trim());if(d)t.push(d.id);else{const P=await Q(c.trim());t.push(P.data.id)}}const s={...a,tags:t};await I(s),o(x),n(T({message:"Product added successfully!"}))}catch(t){console.log(t)}};return h.useEffect(()=>{(async()=>{const s=await E();y(s.data)})()},[]),h.useEffect(()=>{f(Number(((a.price-a.salePrice)/a.price*100).toFixed(2)))},[a]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"dashboard_container",children:e.jsxs("div",{className:u.add_product,children:[e.jsx(D,{title:"Add New Product",description:"Provide detailed information about yourproduct to attract customers."}),e.jsx("h2",{children:"Product Images"}),e.jsx(C,{title:"Drag and drop images here",description:"Recommended dimensions: 1000x1000px. Supported formats: JPG, PNG. You can upload up to 5 images.",quantity:5,onUpload:t=>{o(s=>({...s,images:t,mainImage:t[0]}))}}),e.jsxs("section",{children:[e.jsx("h2",{children:"Basic Information"}),e.jsx(i,{error:"",id:"name",label:"Product Title",value:a.name,name:"name",placeholder:"Enter product name",type:"text",onChange:r}),e.jsx(k,{id:"description",label:"Product Description",value:a.description,error:"",name:"description",placeholder:"Enter product description",onChange:r})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Category & Subcategory"}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(g,{title:"Select a category",selections:j.map(t=>({id:t.id,title:t.title})),onSelect:t=>{o(s=>({...s,categories:[...s.categories||[],t.id-1]}))}}),e.jsx(g,{title:"Select a subcategory",selections:j.map(t=>({id:t.id,title:t.title})),onSelect:t=>{o(s=>({...s,categories:[...s.categories||[],t.id-1]}))}})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Pricing"}),e.jsx(i,{error:"",id:"price",label:"Price",value:a.price,name:"price",placeholder:"Enter the standard price",type:"text",onChange:r}),e.jsx(i,{error:"",id:"salePrice",label:"Sale Price (Optional)",value:a.salePrice,name:"salePrice",placeholder:"Enter a discounted price",type:"text",onChange:r}),e.jsxs("span",{children:["Discount Percentage: ",S,"%"]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Inventory"}),e.jsx(i,{error:"",id:"stockQuantity",label:"Stock Quantity",value:a.stockQuantity,name:"stockQuantity",placeholder:"Enter available stock",type:"text",onChange:r}),e.jsx(i,{error:"",id:"productSKU",label:"SKU (Stock Keeping Unit)",value:a.productSKU,name:"productSKU",placeholder:"Enter product's unique identifier",type:"text",onChange:r}),e.jsx(i,{error:"",id:"lowStockAlert",label:"Low Stock Alert (Optional)",value:a.lowStockAlert,name:"lowStockAlert",placeholder:"Set a threshold for low stock alerts",type:"text",onChange:r})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Tags"}),e.jsx(i,{error:"",id:"tags",label:"Tags",value:a.tags,name:"tags",placeholder:"Add relevant tags or keywords to improve searchability",type:"text",onChange:r}),e.jsx("span",{children:"Suggested tags: Trending, New Arrival, Best Seller"})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Shipping Information"}),e.jsx(i,{error:"",id:"weight",label:"Weight",value:a.weight,name:"weight",placeholder:"Enter product weight",type:"text",onChange:r}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(i,{error:"",id:"length",label:"Length",value:a.length,name:"length",placeholder:"Enter length",type:"text",onChange:r}),e.jsx(i,{error:"",id:"width",label:"Width",value:a.width,name:"width",placeholder:"Enter width",type:"text",onChange:r})]}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(g,{title:"Select unit  (e.g.,  kg,  lbs)",selections:A,onSelect:t=>{o(s=>({...s,unitWeight:t.title}))}}),e.jsx(g,{title:"Select  unit  (e.g.,  cm,  inches)",selections:U,onSelect:t=>{o(s=>({...s,unitDimension:t.title}))}})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Visibility & Publication"}),e.jsx(N,{title:"Publish Now",value:a.isPublished,onToggle:t=>{o(s=>({...s,isPublished:t}))}})]}),e.jsxs("section",{children:[e.jsx("span",{children:"Schedule Publishing (Optional)"}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(i,{error:"",id:"publishDate",label:"Date",value:a.publishDate,name:"publishDate",placeholder:"Select date",type:"text",onChange:r}),e.jsx(i,{error:"",id:"publishTime",label:"Time",value:a.publishTime,name:"publishTime",placeholder:"Select time",type:"text",onChange:r})]})]}),e.jsxs("div",{className:u.product_btns,children:[e.jsx("button",{children:"Save Draft"}),e.jsx("button",{onClick:w,children:"Publish Product"})]})]})})})}export{Y as default};
