import{r as g,j as e}from"./index-DaBHW3j3.js";import{a as j}from"./axios.config-B_oAmgeE.js";const k="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%208L8%2016M16%2016L8%208'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",E="_upload_images_1w8r3_3",I="_title_1w8r3_29",A="_uploaded_images_1w8r3_85",N="_product_photo_1w8r3_97",d={upload_images:E,title:I,uploaded_images:A,product_photo:N},x=async t=>{try{const s=new FormData;return s.append("files",t),(await j.post("/upload",s)).data[0]}catch(s){throw console.error("Error uploading photo:",s),s}},U=async t=>{try{await j.delete(`/upload/files/${t}`)}catch(s){throw console.error("Error uploading photo:",s),s}};function M({quantity:t,title:s,description:u,onUpload:f}){const[a,i]=g.useState([]),[p,_]=g.useState(!1),v=async o=>{o.preventDefault();const n=Array.from(o.dataTransfer.files).filter(r=>r.type==="image/jpeg"||r.type==="image/png");if(n.length>0){for(const r of n)if(a.length<t){const c=await x(r);i(m=>[...m,c])}}},y=o=>{o.preventDefault()},F=async o=>{if(p)return;const l=o.target.files;if(l){const n=Array.from(l).filter(r=>r.type==="image/jpeg"||r.type==="image/png");for(const r of n)if(a.length<t){const c=await x(r);i(m=>{const w=[...m,c];if(f){const P=w.map(h=>h.id).filter(h=>h!==void 0);f(P)}return w})}}},D=async o=>{i(l=>l.filter(n=>n.id!==o)),await U(o)},C=a.map((o,l)=>e.jsxs("div",{className:d.product_photo,children:[e.jsx("img",{src:o.url,alt:"product photo"}),e.jsx("span",{onClick:()=>{D(o.id)},children:e.jsx("img",{src:k,alt:"delete Icon"})})]},o.name+l));return g.useEffect(()=>{a.length===t?_(!0):a.length<t+1&&_(!1)},[a,t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.upload_images,onDrop:v,onDragOver:y,style:p?{cursor:"no-drop"}:{cursor:"default"},children:[a.length<1?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:d.title,children:s}),e.jsx("p",{children:u})]}):e.jsx("div",{className:d.uploaded_images,style:{gridTemplateColumns:`repeat(${t},1fr)`},children:C}),e.jsx("label",{htmlFor:"uploadPhoto",style:p?{cursor:"no-drop"}:{cursor:"pointer"},children:"Upload"}),e.jsx("input",{type:"file",name:"",id:"uploadPhoto",hidden:!0,multiple:t>1,onChange:F})]})})}export{M as U};
