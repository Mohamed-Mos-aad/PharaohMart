import{j as e,r as f,u as F,a as P,e as k,s as D,b as $,c as A,d as H,f as z,g as E,h as B,i as T,k as Z}from"./index-DrBJZPAC.js";import{a as R}from"./axios.config-_zA4RlWj.js";import{T as G}from"./TextAreaInputElement-Dz6LXhkn.js";import{g as U}from"./productActions-Cw5mRmqG.js";const q="_product_8o48f_3",W="_product_data_8o48f_13",O="_product_item_8o48f_67",Y="_product_item_photos_8o48f_77",X="_product_photos_8o48f_87",J="_preview_8o48f_121",K="_zoom_8o48f_139",Q="_product_details_8o48f_155",e0="_product_btns_8o48f_221",t0="_product_review_8o48f_279",s0="_customers_reviews_8o48f_293",r0="_review_8o48f_303",o0="_user_review_8o48f_313",a0="_userPhoto_8o48f_323",n0="_user_review_data_8o48f_349",c0="_user_star_rate_8o48f_369",i0="_review_btns_8o48f_393",l0="_customers_rates_8o48f_433",d0="_over_rate_8o48f_433",u0="_over_rate_stars_8o48f_455",m0="_all_rate_8o48f_479",h0="_star_rate_8o48f_489",p0="_rate_bar_8o48f_499",a={product:q,product_data:W,product_item:O,product_item_photos:Y,product_photos:X,preview:J,zoom:K,product_details:Q,product_btns:e0,product_review:t0,customers_reviews:s0,review:r0,user_review:o0,userPhoto:a0,user_review_data:n0,user_star_rate:c0,review_btns:i0,customers_rates:l0,over_rate:d0,over_rate_stars:u0,all_rate:m0,star_rate:h0,rate_bar:p0};function _0({name:s,category:o,seller:i}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:a.product_data,children:[e.jsxs("h2",{children:["Home ",e.jsx("span",{children:"/"})," ",e.jsx("div",{children:o})]}),e.jsx("h3",{children:s}),e.jsx("h4",{children:i})]})})}function v0({productThumbnail:s,productPhotos:o,productDescription:i,productPrice:h,addToCartHandler:p,removeProductFromCartHandler:m,addToFavouriteHandler:t,removeFromFavouriteHandler:g,addedToWishList:d,addedToCart:c}){const[r,u]=f.useState(s.src),[v,j]=f.useState(!1),[C,I]=f.useState({x:0,y:0}),L=_=>{u(_.url)},w=_=>{const n=_.currentTarget.getBoundingClientRect(),l=(_.clientX-n.left)/n.width*100,b=(_.clientY-n.top)/n.height*100;I({x:l,y:b})},x=o.map(_=>e.jsx("span",{onClick:()=>{L(_)},children:e.jsx("img",{src:_.url,alt:i})},`${_.name}`));return f.useEffect(()=>{u(s.src)},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:a.product_item,children:[e.jsxs("div",{className:a.product_item_photos,children:[e.jsx("div",{className:a.product_photos,children:x}),e.jsx("div",{className:a.preview,style:{backgroundImage:`url(${r})`},onMouseMove:w,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:v&&e.jsx("div",{className:a.zoom,style:{left:`calc(${C.x}% - 100px)`,top:`calc(${C.y}% - 100px)`,backgroundImage:`url(${r})`,backgroundPosition:`${C.x}% ${C.y}%`}})})]}),e.jsxs("div",{className:a.product_details,children:[e.jsx("h2",{children:"Product Details"}),e.jsx("p",{children:i}),e.jsxs("h3",{children:["$",h]}),e.jsxs("div",{className:a.product_btns,children:[c?e.jsx("button",{onClick:m,children:"Remove from Cart"}):e.jsx("button",{onClick:p,children:"Add to Cart"}),e.jsx("button",{children:"Buy Now"})]}),d?e.jsx("button",{onClick:g,children:"remove from Wishlist"}):e.jsx("button",{onClick:t,children:"Add to Wishlist"})]})]})})}const N="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.4883%207.04234L12.3172%209.80984L13.2671%2013.9302C13.3699%2014.3705%2013.199%2014.8296%2012.8333%2015.0956C12.4676%2015.3616%2011.9782%2015.3828%2011.5909%2015.1494L7.99719%2012.9697L4.41125%2015.1494C4.02394%2015.3828%203.53452%2015.3616%203.16882%2015.0956C2.80312%2014.8296%202.63223%2014.3705%202.735%2013.9302L3.68352%209.81406L0.511719%207.04234C0.168718%206.74652%200.0365809%206.27384%200.176449%205.84303C0.316317%205.41222%200.700908%205.1073%201.15227%205.06938L5.33305%204.70727L6.965%200.814766C7.13926%200.397124%207.54746%200.12514%208%200.12514C8.45254%200.12514%208.86074%200.397124%209.035%200.814766L10.6719%204.70727L14.8512%205.06938C15.3026%205.1073%2015.6872%205.41222%2015.8271%205.84303C15.9669%206.27384%2015.8348%206.74652%2015.4918%207.04234H15.4883Z'%20fill='%23C78F00'/%3e%3c/svg%3e",M="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.8188%205.8407C15.6795%205.41148%2015.2972%205.107%2014.8477%205.06727L10.6719%204.70727L9.035%200.814766C8.86074%200.397124%208.45254%200.12514%208%200.12514C7.54746%200.12514%207.13926%200.397124%206.965%200.814766L5.33305%204.70727L1.15227%205.06938C0.700908%205.1073%200.316317%205.41222%200.176449%205.84303C0.0365809%206.27384%200.168718%206.74652%200.511719%207.04234L3.68352%209.81406L2.73289%2013.9302C2.63012%2014.3705%202.80102%2014.8296%203.16672%2015.0956C3.53241%2015.3616%204.02183%2015.3828%204.40914%2015.1494L7.99508%2012.9697L11.5887%2015.1494C11.9761%2015.3828%2012.4655%2015.3616%2012.8312%2015.0956C13.1969%2014.8296%2013.3678%2014.3705%2013.265%2013.9302L12.3151%209.80984L15.4862%207.04234C15.8292%206.74548%2015.9603%206.27167%2015.8188%205.8407ZM14.7486%206.19227L11.5775%208.95977C11.263%209.23335%2011.1255%209.65843%2011.2203%2010.0644L12.173%2014.1875L8.58219%2012.0078C8.22504%2011.7903%207.77637%2011.7903%207.41922%2012.0078L3.83328%2014.1875L4.77969%2010.0672C4.87447%209.66124%204.73702%209.23617%204.4225%208.96258L1.25%206.19648C1.24974%206.19438%201.24974%206.19226%201.25%206.19016L5.42938%205.82875C5.84523%205.7921%206.20659%205.52818%206.36805%205.1432L8%201.25563L9.63125%205.1432C9.79271%205.52818%2010.1541%205.7921%2010.5699%205.82875L14.75%206.19016C14.75%206.19016%2014.75%206.19437%2014.75%206.19508L14.7486%206.19227Z'%20fill='%23C78F00'/%3e%3c/svg%3e",g0="data:image/svg+xml,%3csvg%20width='18'%20height='16'%20viewBox='0%200%2018%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.2812%205.25938C16.9252%204.85594%2016.4131%204.62489%2015.875%204.625H11.5V3.375C11.5%201.64911%2010.1009%200.25%208.375%200.25C8.13818%200.24983%207.9216%200.383527%207.81563%200.595312L4.86406%206.5H1.5C0.809644%206.5%200.25%207.05964%200.25%207.75V14.625C0.25%2015.3154%200.809644%2015.875%201.5%2015.875H14.9375C15.8827%2015.8753%2016.6803%2015.1721%2016.7984%2014.2344L17.7359%206.73438C17.8032%206.20023%2017.6375%205.66297%2017.2812%205.25938ZM1.5%207.75H4.625V14.625H1.5V7.75ZM16.4953%206.57812L15.5578%2014.0781C15.5184%2014.3907%2015.2526%2014.6251%2014.9375%2014.625H5.875V7.27266L8.74297%201.53594C9.61946%201.71136%2010.2502%202.48112%2010.25%203.375V5.25C10.25%205.59518%2010.5298%205.875%2010.875%205.875H15.875C16.0544%205.87494%2016.2252%205.95198%2016.3439%206.08652C16.4626%206.22106%2016.5177%206.40012%2016.4953%206.57812Z'%20fill='%2362522D'/%3e%3c/svg%3e",x0="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2025.0.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2018%2016'%20style='enable-background:new%200%200%2018%2016;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%2362522D;}%20%3c/style%3e%3cpath%20class='st0'%20d='M17.3,5.3c-0.4-0.4-0.9-0.6-1.4-0.6h-4.4V3.4c0-1.7-1.4-3.1-3.1-3.1c-0.2,0-0.5,0.1-0.6,0.3l-3,5.9H1.5%20c-0.7,0-1.2,0.6-1.2,1.2v6.9c0,0.7,0.6,1.2,1.2,1.2h13.4c0.9,0,1.7-0.7,1.9-1.6l0.9-7.5C17.8,6.2,17.6,5.7,17.3,5.3z'/%3e%3c/svg%3e",f0="data:image/svg+xml,%3csvg%20width='18'%20height='16'%20viewBox='0%200%2018%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.7359%209.26562L16.7984%201.76562C16.6803%200.827882%2015.8827%200.124676%2014.9375%200.125H1.5C0.809644%200.125%200.25%200.684644%200.25%201.375V8.25C0.25%208.94036%200.809644%209.5%201.5%209.5H4.86406L7.81563%2015.4047C7.9216%2015.6165%208.13818%2015.7502%208.375%2015.75C10.1009%2015.75%2011.5%2014.3509%2011.5%2012.625V11.375H15.875C16.4132%2011.3752%2016.9256%2011.1441%2017.2817%2010.7404C17.6378%2010.3368%2017.8032%209.79964%2017.7359%209.26562ZM4.625%208.25H1.5V1.375H4.625V8.25ZM16.3438%209.91328C16.2259%2010.0489%2016.0547%2010.1262%2015.875%2010.125H10.875C10.5298%2010.125%2010.25%2010.4048%2010.25%2010.75V12.625C10.2502%2013.5189%209.61946%2014.2886%208.74297%2014.4641L5.875%208.72734V1.375H14.9375C15.2526%201.37489%2015.5184%201.60929%2015.5578%201.92188L16.4953%209.42188C16.519%209.59995%2016.4636%209.77949%2016.3438%209.91328Z'%20fill='%2362522D'/%3e%3c/svg%3e",w0="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2025.0.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2018%2016'%20style='enable-background:new%200%200%2018%2016;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill-rule:evenodd;clip-rule:evenodd;fill:%2362522D;}%20.st1{fill:%2362522D;}%20%3c/style%3e%3cpath%20class='st0'%20d='M17.7,9.3l-0.9-7.5c-0.1-0.9-0.9-1.6-1.9-1.6H1.5c-0.7,0-1.2,0.6-1.2,1.2v6.9c0,0.7,0.6,1.2,1.2,1.2h3.4l3,5.9%20c0.1,0.2,0.3,0.3,0.6,0.3c1.7,0,3.1-1.4,3.1-3.1v-1.2h4.4c0.5,0,1.1-0.2,1.4-0.6C17.6,10.3,17.8,9.8,17.7,9.3z%20M4.6,8.2H1.5V1.4h3.1%20V8.2z%20M16.3,9.9c-0.1,0.1-0.3,0.2-0.5,0.2h-5c-0.3,0-0.6,0.3-0.6,0.6v1.9c0,0.9-0.6,1.7-1.5,1.8L5.9,8.7V1.4h9.1%20c0.3,0,0.6,0.2,0.6,0.5l0.9,7.5C16.5,9.6,16.5,9.8,16.3,9.9z'/%3e%3cpath%20class='st1'%20d='M17,5.2c-0.2-1.2-0.3-2.9-1.2-3.8c-1-1-2.9-0.6-4.1-0.6c-1.7,0-3.4,0-5,0c-0.5,0-0.7,0.2-0.9,0.5%20c0,0.1-0.1,0.1-0.1,0.2C5.5,1.7,5.4,1.8,5.2,1.9C5.1,2,5,2.1,5,2.2C5,2.1,5,2,5,1.9c0-1.4-2-1.4-2.9-1.2C1.5,0.8,0.9,1,0.6,1.5%20c-0.3,0.6-0.2,1.4-0.3,2c0,1.3,0,2.9,0.7,4.1C1.6,8.7,2.9,9,4.1,9.1c0.5,0,1,0,1.4,0c0.3,0.8,0.6,1.6,1,2.3c0.5,0.9,0.8,2,1.3,2.9%20c0.2,0.3,0.7,0.6,1.1,0.5c0.8-0.3,1.4-0.8,1.7-1.6c0.2-0.4,0.2-0.8,0.2-1.2c0-0.2-0.1-0.4-0.1-0.6c0-0.1-0.1-0.2-0.1-0.3%20c0,0,0,0,0,0c0.2,0,0.5,0,0.8,0l1.6,0l3.3-0.1c0.5,0,1-0.4,1-1C17.4,8.3,17.3,6.8,17,5.2z'/%3e%3c/svg%3e",j0=s=>new Date(s).toISOString().split("T")[0],C0=async s=>{try{return(await R.post("/reviews",{data:s})).data.data}catch(o){throw console.error("Error Response:",o),o}},L0=async s=>{try{return(await R.get(`/products/${s}?populate[reviews][populate]=*`)).data.data.reviews}catch(o){throw console.error(`Error fetching product with id ${s}:`,o),o}},S=async(s,o)=>{try{return(await R.put(`/reviews/${s}`,{data:o})).data}catch(i){throw console.error(`Error updating product with id ${s}:`,i),i}};function I0({review:s,reviewsUpdated:o,userLiked:i,userUnLiked:h}){const p=F(),{userData:m}=P(),t=async()=>{if(!m){p(k({message:"Please Log in First"}));return}let c=[];!i&&!h?c=[...s.likes?.map(r=>typeof r=="string"?r:r.documentId)??[],m.documentId]:c=(s.likes?.map(r=>typeof r=="string"?r:r.documentId)??[]).filter(r=>r!==m.documentId);try{await S(s.documentId,{like:c.length,likes:c}),o()}catch(r){console.log(r)}},g=async()=>{if(!m){p(k({message:"Please Log in First"}));return}let c=[];!h&&!i?c=[...s.unLikes?.map(r=>typeof r=="string"?r:r.documentId)??[],m.documentId]:c=(s.likes?.map(r=>typeof r=="string"?r:r.documentId)??[]).filter(r=>r!==m.documentId);try{await S(s.documentId,{unLike:c.length,unLikes:c}),o()}catch(r){console.log(r)}},d=Array.from({length:5},(c,r)=>r<s.userRate?e.jsx("img",{src:N,alt:"star icon"},r):e.jsx("img",{src:M,alt:"unStar icon"},r));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:a.review,children:[e.jsxs("div",{className:a.user_review,children:[e.jsx("div",{className:a.userPhoto,children:typeof s.user.logo=="object"&&s.user.logo?.url?e.jsx("img",{src:s.user.logo.url,alt:s.user.username}):e.jsx("div",{children:s.user.username[0]})}),e.jsxs("div",{className:a.user_review_data,children:[e.jsx("h3",{children:s.user.username}),e.jsx("h4",{children:j0(s.publishedAt)})]})]}),e.jsx("div",{className:a.user_star_rate,children:d}),e.jsx("p",{children:s.userComment}),e.jsxs("div",{className:a.review_btns,children:[e.jsxs("button",{onClick:t,children:[i?e.jsx("img",{src:x0,alt:"liked icon"}):e.jsx("img",{src:g0,alt:"like icon"}),e.jsx("span",{children:s.like})]}),e.jsxs("button",{onClick:g,children:[h?e.jsx("img",{src:w0,alt:"unLiked icon"}):e.jsx("img",{src:f0,alt:"unLike icon"}),e.jsx("span",{children:s.unLike})]})]})]})})}function k0({reviews:s}){const o=s.length,i=s.filter(u=>u.userRate===1).length,h=s.filter(u=>u.userRate===2).length,p=s.filter(u=>u.userRate===3).length,m=s.filter(u=>u.userRate===4).length,t=s.filter(u=>u.userRate===5).length,g=i*1+h*2+p*3+m*4+t*5,d={one:o>0?i/o*100:0,two:o>0?h/o*100:0,three:o>0?p/o*100:0,four:o>0?m/o*100:0,five:o>0?t/o*100:0},c=o>0?g/o:0,r=Array.from({length:5},(u,v)=>{const j=Math.round(c*2)/2;return v<Math.floor(j)?e.jsx("img",{src:N,alt:"star icon"},v):e.jsx("img",{src:M,alt:"unStar icon"},v)});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.over_rate,children:[e.jsx("h2",{children:c.toFixed(1)}),e.jsx("div",{className:a.over_rate_stars,children:r}),e.jsxs("h3",{children:[o," reviews"]})]}),e.jsxs("div",{className:a.all_rate,children:[e.jsxs("div",{className:a.star_rate,children:["5",e.jsx("div",{className:a.rate_bar,children:e.jsx("span",{style:{width:`${d.five}%`}})}),e.jsxs("span",{children:[d.five.toFixed(1),"%"]})]}),e.jsxs("div",{className:a.star_rate,children:["4",e.jsx("div",{className:a.rate_bar,children:e.jsx("span",{style:{width:`${d.four}%`}})}),e.jsxs("span",{children:[d.four.toFixed(1),"%"]})]}),e.jsxs("div",{className:a.star_rate,children:["3",e.jsx("div",{className:a.rate_bar,children:e.jsx("span",{style:{width:`${d.three}%`}})}),e.jsxs("span",{children:[d.three.toFixed(1),"%"]})]}),e.jsxs("div",{className:a.star_rate,children:["2",e.jsx("div",{className:a.rate_bar,children:e.jsx("span",{style:{width:`${d.two}%`}})}),e.jsxs("span",{children:[d.two.toFixed(1),"%"]})]}),e.jsxs("div",{className:a.star_rate,children:["1",e.jsx("div",{className:a.rate_bar,children:e.jsx("span",{style:{width:`${d.one}%`}})}),e.jsxs("span",{children:[d.one.toFixed(1),"%"]})]})]})]})}const y0="_add_review_1wiy1_3",b0="_review_1wiy1_15",P0="_stars_rate_1wiy1_29",R0="_loading_spinner_1wiy1_77",y={add_review:y0,review:b0,stars_rate:P0,loading_spinner:R0},N0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='icon%20icon-tabler%20icons-tabler-outline%20icon-tabler-send-2'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M4.698%204.034l16.302%207.966l-16.302%207.966a.503%20.503%200%200%201%20-.546%20-.124a.555%20.555%200%200%201%20-.12%20-.568l2.468%20-7.274l-2.468%20-7.274a.555%20.555%200%200%201%20.12%20-.568a.503%20.503%200%200%201%20.546%20-.124z'%20/%3e%3cpath%20d='M6.5%2012h14.5'%20/%3e%3c/svg%3e",M0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='icon%20icon-tabler%20icons-tabler-outline%20icon-tabler-circle-dotted'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M7.5%204.21l0%20.01'%20/%3e%3cpath%20d='M4.21%207.5l0%20.01'%20/%3e%3cpath%20d='M3%2012l0%20.01'%20/%3e%3cpath%20d='M4.21%2016.5l0%20.01'%20/%3e%3cpath%20d='M7.5%2019.79l0%20.01'%20/%3e%3cpath%20d='M12%2021l0%20.01'%20/%3e%3cpath%20d='M16.5%2019.79l0%20.01'%20/%3e%3cpath%20d='M19.79%2016.5l0%20.01'%20/%3e%3cpath%20d='M21%2012l0%20.01'%20/%3e%3cpath%20d='M19.79%207.5l0%20.01'%20/%3e%3cpath%20d='M16.5%204.21l0%20.01'%20/%3e%3cpath%20d='M12%203l0%20.01'%20/%3e%3c/svg%3e";function H0({productData:s,onSent:o}){const{userData:i}=P(),h=!!i,p=i?.id?i.id.toString():"",m={user:h?p:"",product:s?.documentId??"",userComment:"",like:0,unLike:0,userRate:0},t=F(),[g,d]=f.useState(!1),[c,r]=f.useState(m),[u,v]=f.useState(""),j=L=>{const{value:w}=L.currentTarget;v(""),r(x=>({...x,userComment:w}))},C=async()=>{try{if(!s)return;if(!h||!i){t(k({message:"Please Log in First"}));return}if(c.userRate===0){t(k({message:"Please Select Rate"}));return}if(c.userComment.trim().length<10){v("Review must be at least 10 characters");return}if(c.userComment.trim().length>500){v("Review is too long (max 500 characters)");return}d(!0),await C0(c),t(D({message:"Review added successfully!"})),r(m),v(""),o()}catch(L){console.log(L),t(k({message:"Failed to add review"}))}finally{d(!1)}},I=Array.from({length:5},(L,w)=>e.jsx("img",{src:w<c.userRate?N:M,alt:"star",onClick:()=>{let x=w+1;x===c.userRate&&(x=0),r(_=>({..._,userRate:x}))}},w));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:y.add_review,children:[e.jsxs("div",{className:y.review,children:[e.jsx("div",{className:y.stars_rate,children:I}),e.jsx(G,{id:"review",label:"Review",name:"review",error:u,placeholder:"Enter Your Review",value:c.userComment||"",onChange:j})]}),e.jsx("button",{onClick:C,disabled:g,children:e.jsx("img",{src:g?M0:N0,alt:"send button",className:g?y.loading_spinner:""})})]})})}function $0(){const{id:s}=$(),o=A(),i=H(n=>n.cart),h=H(n=>n.favourite),{userData:p}=P(),m=z(),[t,g]=f.useState(),[d,c]=f.useState([]),r=()=>{if(!t)return;i.products.some(l=>l.productId===t.documentId)||o(E({productId:t.documentId,name:t.name,sellerName:t.name,quantity:1,price:t.price,imageUrl:t.mainImage.url}))},u=()=>{if(!t)return;i.products.some(l=>l.productId===t.documentId)&&o(B({productId:t.documentId,name:t.name,sellerName:t.name,quantity:1,price:t.price,imageUrl:t.mainImage.url}))},v=()=>t?i.products.some(l=>l.productId===t.documentId):!1,j=()=>{if(!t)return;h.products.some(l=>l.productId===t.documentId)||o(T({productId:t.documentId,name:t.name,sellerName:t.name,quantity:1,price:t.price,imageUrl:t.mainImage.url}))},C=()=>{if(!t)return;h.products.some(l=>l.productId===t.documentId)&&o(Z({productId:t.documentId,name:t.name,sellerName:t.name,quantity:1,price:t.price,imageUrl:t.mainImage.url}))},I=()=>t?h.products.some(l=>l.productId===t.documentId):!1,L=n=>!p||!n.likes?!1:n.likes.some(l=>l.documentId===p.documentId),w=n=>!p||!n.unLikes?!1:n.unLikes.some(l=>l.documentId===p.documentId),x=async()=>{try{if(s){const l=[...await L0(s)].sort((b,V)=>new Date(V.createdAt).getTime()-new Date(b.createdAt).getTime());c(l)}}catch(n){console.log(n)}},_=d.map(n=>e.jsx(I0,{reviewsUpdated:x,review:n,userLiked:L(n),userUnLiked:w(n)},n.documentId));return f.useEffect(()=>{(async()=>{try{if(s){const l=await U(s);g(l)}}catch(l){console.log(l)}})()},[s]),f.useEffect(()=>{t&&x()},[t,s]),t?(t.isPublished||m("/"),e.jsx(e.Fragment,{children:e.jsx("div",{className:"global_container",children:e.jsxs("div",{className:a.product,children:[e.jsx(_0,{name:t?.name,category:t.categories[0].title,seller:t.owner.storeName}),e.jsx(v0,{productThumbnail:{src:t.mainImage.url,alt:t.name},productPhotos:t.images,productDescription:t.description,productPrice:t?.salePrice||0,addToCartHandler:r,addToFavouriteHandler:j,removeFromFavouriteHandler:C,removeProductFromCartHandler:u,addedToWishList:I(),addedToCart:v()}),e.jsxs("div",{className:a.product_review,children:[e.jsxs("div",{className:a.customers_reviews,children:[e.jsx(H0,{productData:t,onSent:x}),_]}),e.jsx("div",{className:a.customers_rates,children:e.jsx(k0,{reviews:t?.reviews})})]})]})})})):e.jsx(e.Fragment,{})}export{$0 as default};
