import{r as h,j as e}from"./index-Bm52MoZb.js";import{D as P}from"./DashboardHeader-BsUmuNlu.js";import{I as s}from"./InputElement-DNxHq9H2.js";import{D as g,g as v}from"./categoriesActions-6-6Qak3O.js";import{U as _}from"./UploadPhotos-Bsg0VavJ.js";import{T}from"./ToggleElement-BTTF1QXc.js";import{T as D}from"./TextAreaInputElement-BKMJdNhR.js";import{a as j}from"./axios.config-DecBwDMt.js";import{d as E}from"./productActions-C3uaSF3X.js";import{W as C,L as N}from"./index-DD7Rslxi.js";const k="_add_product_1i7ve_3",I="_inputs_row_1i7ve_41",A="_product_btns_1i7ve_119",u={add_product:k,inputs_row:I,product_btns:A},U=async p=>{try{return(await j.post("/tags",{data:{name:p}})).data}catch(n){throw console.error("Error adding tag:",n),n}},K=async p=>{try{return(await j.get(`/tags?filters[name][$eq]=${p}`)).data.data[0]||null}catch(n){return console.error("Error finding tag:",n),null}};function J(){const p=JSON.parse(localStorage.getItem("userData")||"null"),n=new Date,m={owner:p.id,name:"",description:"",categories:[],tags:[],price:0,salePrice:0,stockQuantity:0,productSKU:"",lowStockAlert:0,weight:0,length:0,width:0,unitWeight:"",unitDimension:"",images:[],mainImage:null,isPublished:!1,publishDate:n.toISOString().split("T")[0],publishTime:n.toTimeString().split(" ")[0]},[a,o]=h.useState(m),[x,b]=h.useState([]),[S,y]=h.useState(0),r=t=>{const{id:i,value:l}=t.currentTarget;let c=l;i==="tags"&&(c=l.split(",").map(d=>d.trim())),o(d=>({...d,[i]:c}))},f=async()=>{if(a.isPublished)try{const t=[];if(a.tags&&a.tags.length>0)for(const l of a.tags){const c=typeof l=="string"?l:String(l);if(!c.trim())continue;const d=await K(c.trim());if(d)t.push(d.id);else{const w=await U(c.trim());t.push(w.data.id)}}const i={...a,tags:t};await E(i),o(m),alert("Product added successfully!")}catch(t){console.log(t)}};return h.useEffect(()=>{(async()=>{const i=await v();b(i.data)})()},[]),h.useEffect(()=>{y(Number(((a.price-a.salePrice)/a.price*100).toFixed(2)))},[a]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"dashboard_container",children:e.jsxs("div",{className:u.add_product,children:[e.jsx(P,{title:"Add New Product",description:"Provide detailed information about yourproduct to attract customers."}),e.jsx("h2",{children:"Product Images"}),e.jsx(_,{title:"Drag and drop images here",description:"Recommended dimensions: 1000x1000px. Supported formats: JPG, PNG. You can upload up to 5 images.",quantity:5,onUpload:t=>{o(i=>({...i,images:t,mainImage:t[0]}))}}),e.jsxs("section",{children:[e.jsx("h2",{children:"Basic Information"}),e.jsx(s,{error:"",id:"name",label:"Product Title",value:a.name,name:"name",placeholder:"Enter product name",type:"text",onChange:r}),e.jsx(D,{id:"description",label:"Product Description",value:a.description,name:"description",placeholder:"Enter product description",onChange:r})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Category & Subcategory"}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(g,{title:"Select a category",selections:x.map(t=>({id:t.id,title:t.title})),onSelect:t=>{o(i=>({...i,categories:[...i.categories||[],t.id-1]}))}}),e.jsx(g,{title:"Select a subcategory",selections:x.map(t=>({id:t.id,title:t.title})),onSelect:t=>{o(i=>({...i,categories:[...i.categories||[],t.id-1]}))}})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Pricing"}),e.jsx(s,{error:"",id:"price",label:"Price",value:a.price,name:"price",placeholder:"Enter the standard price",type:"text",onChange:r}),e.jsx(s,{error:"",id:"salePrice",label:"Sale Price (Optional)",value:a.salePrice,name:"salePrice",placeholder:"Enter a discounted price",type:"text",onChange:r}),e.jsxs("span",{children:["Discount Percentage: ",S,"%"]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Inventory"}),e.jsx(s,{error:"",id:"stockQuantity",label:"Stock Quantity",value:a.stockQuantity,name:"stockQuantity",placeholder:"Enter available stock",type:"text",onChange:r}),e.jsx(s,{error:"",id:"productSKU",label:"SKU (Stock Keeping Unit)",value:a.productSKU,name:"productSKU",placeholder:"Enter product's unique identifier",type:"text",onChange:r}),e.jsx(s,{error:"",id:"lowStockAlert",label:"Low Stock Alert (Optional)",value:a.lowStockAlert,name:"lowStockAlert",placeholder:"Set a threshold for low stock alerts",type:"text",onChange:r})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Tags"}),e.jsx(s,{error:"",id:"tags",label:"Tags",value:a.tags,name:"tags",placeholder:"Add relevant tags or keywords to improve searchability",type:"text",onChange:r}),e.jsx("span",{children:"Suggested tags: Trending, New Arrival, Best Seller"})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Shipping Information"}),e.jsx(s,{error:"",id:"weight",label:"Weight",value:a.weight,name:"weight",placeholder:"Enter product weight",type:"text",onChange:r}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(s,{error:"",id:"length",label:"Length",value:a.length,name:"length",placeholder:"Enter length",type:"text",onChange:r}),e.jsx(s,{error:"",id:"width",label:"Width",value:a.width,name:"width",placeholder:"Enter width",type:"text",onChange:r})]}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(g,{title:"Select unit  (e.g.,  kg,  lbs)",selections:C,onSelect:t=>{o(i=>({...i,unitWeight:t.title}))}}),e.jsx(g,{title:"Select  unit  (e.g.,  cm,  inches)",selections:N,onSelect:t=>{o(i=>({...i,unitDimension:t.title}))}})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Visibility & Publication"}),e.jsx(T,{title:"Publish Now",value:a.isPublished,onToggle:t=>{o(i=>({...i,isPublished:t}))}})]}),e.jsxs("section",{children:[e.jsx("span",{children:"Schedule Publishing (Optional)"}),e.jsxs("div",{className:u.inputs_row,children:[e.jsx(s,{error:"",id:"publishDate",label:"Date",value:a.publishDate,name:"publishDate",placeholder:"Select date",type:"text",onChange:r}),e.jsx(s,{error:"",id:"publishTime",label:"Time",value:a.publishTime,name:"publishTime",placeholder:"Select time",type:"text",onChange:r})]})]}),e.jsxs("div",{className:u.product_btns,children:[e.jsx("button",{children:"Save Draft"}),e.jsx("button",{onClick:f,children:"Publish Product"})]})]})})})}export{J as default};
