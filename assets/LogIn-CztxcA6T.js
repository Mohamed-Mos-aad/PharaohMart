import{s as d,i as w,l as f,r as m,j as r,n as E}from"./index-O59s0r6e.js";import{S as x}from"./SwitchAuth-D74ZRekf.js";import{I as p}from"./InputElement-DB25o3qJ.js";import{a as j}from"./index-CR4Xcdnb.js";import{b as y,a as P}from"./axios.config-DClue4Qq.js";const b="_auth_form_17roa_3",v={auth_form:b},_=async a=>{try{const s=await I(a);return d("token",s.jwt),d("userData",s.user),{success:!0,data:{user:s.user,jwt:s.jwt}}}catch(s){return y.isAxiosError(s)?{success:!1,error:{message:s.response?.data?.message||s.message,details:s.response?.data}}:{success:!1,error:{message:s instanceof Error?s.message:"Unknown error occurred",details:s}}}},I=async a=>{try{return(await P.post("/auth/local",{identifier:a.userEmail,password:a.userPassword})).data}catch(s){throw console.error("[Login Error]:",s),s}};function S(){const a=w(),s=f(),[n,h]=m.useState({userEmail:"",userPassword:""}),[c,i]=m.useState({userEmail:"",userPassword:""}),u=t=>{const{id:l,value:e}=t.currentTarget;h(o=>({...o,[l]:e}))},g=async()=>{const t=j(n);if(i(t),Object.values(t).every(e=>e===""))try{const e=await _(n);if(e.error?.message==="Request failed with status code 400"){i(o=>({...o,userEmail:"Invalid Emai or password"}));return}s(E(e.data?.user.roleType)),e.data?.user.roleType?.toLowerCase()==="seller"?a("/dashboard"):e.data?.user.roleType==="customer"&&a("/")}catch(e){console.log(e)}};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"global_container",children:r.jsxs("div",{className:v.auth_form,children:[r.jsx("h1",{children:"Welcome back"}),r.jsx(p,{id:"userEmail",label:"Email",type:"text",name:"userEmail",error:c.userEmail,placeholder:"Email",onChange:u}),r.jsx(p,{id:"userPassword",label:"Password",type:"password",name:"userPassword",error:c.userPassword,placeholder:"Password",onChange:u}),r.jsx("button",{onClick:g,children:"Login"}),r.jsx(x,{to:"signup"})]})})})}export{S as default};
